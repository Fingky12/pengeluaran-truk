<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Aplikasi Pengeluaran Truk</title>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDrWaLNPVO03AERsRXgRF2BGnrasZoSotk",
    authDomain: "pengeluaran-truk.firebaseapp.com",
    projectId: "pengeluaran-truk",
    storageBucket: "pengeluaran-truk.appspot.com",
    messagingSenderId: "734887345473",
    appId: "1:734887345473:android:77c682f3a682ed6a9575c0"
  };

  // Inisialisasi Firebase
  firebase.initializeApp(firebaseConfig);
</script>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDrWaLNPVO03AERsRXgRF2BGnrasZoSotk",
    authDomain: "pengeluaran-truk.firebaseapp.com",
    projectId: "pengeluaran-truk",
    storageBucket: "pengeluaran-truk.firebasestorage.app",
    messagingSenderId: "734887345473",
    appId: "1:734887345473:web:51b6ffdd58ac869b9575c0",
    measurementId: "G-KEDZ3R75SB"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

<body>
  <h2>🚚 Aplikasi Pengeluaran Truk</h2>

<div id="loginForm">
  <h3>🔐 Login Admin</h3>
  <input type="email" id="emailLogin" placeholder="Email Admin">
  <input type="password" id="passwordLogin" placeholder="Password">
  <button onclick="loginAdmin()">Login</button>
</div>

<button onclick="logoutAdmin()" id="logoutBtn" style="display:none; background:#e74c3c; color:#fff; margin-top:10px;">Logout</button>

  <!-- Form Tambah Barang ke Stok -->
  <section>
    <h3>➕ Tambah Barang ke Stok</h3>
    <button onclick="urutkanStokAZ()">🔤 Urutkan A-Z</button>
    <input id="namaBarang" placeholder="Nama Barang" />
    <select id="kondisiBarang">
      <option>Baru</option>
      <option>Bekas</option>
    </select>
    <input id="hargaBarang" placeholder="Harga Satuan" type="number" />
    <input id="jumlahBarang" placeholder="Jumlah" type="number" />
    <button onclick="tambahStok()">Tambah ke Stok</button>
  </section>

  <!-- Daftar Stok -->
  <section>
    <h3>📦 Stok Barang</h3>
    <table id="tabelStok">
	<div id="formEdit" style="display:none; margin-top:15px;">
	  <h4>✏️ Edit Barang</h4>
	  <input id="editNama" placeholder="Nama Barang" />
	  <select id="editKondisi">
	    <option>Baru</option>
	    <option>Bekas</option>
	  </select>
	  <input id="editHarga" placeholder="Harga Satuan" type="number" />
	  <input id="editJumlah" placeholder="Jumlah" type="number" />
	  <button onclick="simpanEdit()">💾 Simpan Perubahan</button>
	</div>
    </table>
  </section>

  <!-- Form Ambil Barang -->
  <section>
    <h3>🛠️ Supir Ambil Barang</h3>
    <select id="pilihBarang"></select>
    <input id="jumlahAmbil" placeholder="Jumlah Ambil" type="number" />
    <button onclick="ambilBarang()">Ambil & Catat</button>
  </section>

  <!-- Form Data Supir -->
  <section>
  <h3>🚹 Data Supir</h3>			   
    <input id="namaSupir" placeholder="Nama Supir" />
    <input id="nohpSupir" placeholder="No HP" />
    <input id="kendaraanSupir" placeholder="Kendaraan" />
    <button onclick="tambahSupir()">Tambah Supir</button>
    <table id="tabelSupir"></table>
  </section>

  <!-- Log Pengeluaran -->
  <section>
    <h3>📋 Riwayat Pengeluaran</h3>
    <div style="margin-bottom:10px;">
      <input type="text" id="filterBarang" placeholder="🔍 Filter Nama Barang" oninput="renderLog()">
      <input type="date" id="filterTanggal" oninput="renderLog()">
    </div>
    <button onclick="exportExcel()">📥 Ekspor ke Excel</button>
    <table id="tabelLog"></table>
    <div id="totalPengeluaran">Total: Rp 0</div>
  </section>

  <select id="inputSupir">
    <option value="">-- Pilih Supir --</option>
  </select>

  <section>
    <h3>📊 Rekap Pengeluaran per Supir / Truk</h3>
    <button onclick="rekapPengeluaran()">🔄 Tampilkan Rekap</button>
    <button onclick="exportRekap()">📥 Ekspor Rekap ke Excel</button>
    <table id="tabelRekap"></table>
  </section>

  <script src="script.js"></script>
</body>
</html>
